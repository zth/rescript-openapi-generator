# Contributing to ReScript OpenAPI Generator

Thank you for your interest in contributing! This project is an experiment in AI-driven development for ReScript, where most of the codebase is generated and evolved by AI tooling.

## 🤖 AI-Driven Development

This project serves as an exploration of how AI can assist in ReScript development:

- **AI-first approach**: Most code is generated by AI agents
- **Human oversight**: Humans guide high-level design and review output
- **Iterative refinement**: AI and humans collaborate to improve the codebase

## 🚀 Getting Started

### Prerequisites

- Node.js 18+ (we test on 18.x, 20.x, 22.x)
- Yarn package manager
- Git

### Setup

1. **Clone the repository**

   ```bash
   git clone https://github.com/rescript-openapi/rescript-openapi-generator.git
   cd rescript-openapi-generator
   ```

2. **Install dependencies**

   ```bash
   yarn install
   ```

3. **Build the project**

   ```bash
   yarn res:build
   ```

4. **Run tests**
   ```bash
   yarn test
   ```

## 🧪 Development Workflow

### Running Tests

```bash
# Run all tests
yarn test

# Watch mode (AVA)
yarn test --watch

# Build and test
yarn res:build && yarn test
```

### Code Formatting

```bash
# Format all ReScript files
yarn res:format

# Check formatting without changing files
yarn res:format:check
```

### ReScript Development

```bash
# Watch mode for development
yarn res:dev

# Clean build artifacts
yarn res:clean

# Fresh build
yarn res:clean && yarn res:build
```

## 📝 Code Style

### ReScript Conventions

- Use descriptive variable and function names
- Prefer pattern matching over conditionals
- Keep functions small and focused
- Use proper module organization
- Follow ReScript naming conventions (camelCase for values, PascalCase for types/modules)

### Testing Philosophy

- **Exact string matching**: No snapshots, prefer explicit assertions
- **Comprehensive coverage**: Test all edge cases and error conditions
- **Real-world scenarios**: Use the Petstore API as our integration test
- **Fast execution**: Tests should run quickly for good developer experience

## 🏗️ Project Structure

```
.
├── src/                     # ReScript source files
├── __tests__/              # Test files (*.test.res)
├── examples/               # Example OpenAPI specs for testing
│   └── petstore/          # Petstore API example
├── .github/workflows/     # CI/CD configurations
└── node_modules/         # Dependencies
```

## 🔄 Pull Request Process

1. **Fork the repository** and create your feature branch from `main`
2. **Make your changes** following the code style guidelines
3. **Add tests** for any new functionality
4. **Run the full test suite** to ensure nothing breaks
5. **Check formatting** with `yarn res:format:check`
6. **Submit a pull request** with a clear description

### PR Requirements

- ✅ All tests must pass
- ✅ Code must be properly formatted
- ✅ No linter errors
- ✅ Include tests for new features
- ✅ Update documentation if needed

## 🧪 Testing Guidelines

### Test Structure

- Place tests in `__tests__/` directory
- Use `*_test.res` naming convention
- Import from `@dzakh/rescript-ava`

### Example Test

```rescript
open Ava

test("should parse OpenAPI schema", t => {
  let schema = parseSchema(validSchemaJson)
  t->Assert.is(schema.title, "Pet Store API")
})

asyncTest("should generate client code", t => {
  generateClient(petstoreSpec)
  ->Promise.thenResolve(result => {
    t->Assert.is(result.success, true)
  })
})
```

## 🐛 Issue Reporting

When reporting issues:

1. **Check existing issues** first
2. **Provide clear reproduction steps**
3. **Include relevant code snippets**
4. **Specify your environment** (Node version, OS, etc.)
5. **Add appropriate labels**

## 📚 Documentation

- Update README.md for user-facing changes
- Add inline comments for complex logic
- Document API changes in commit messages
- Keep examples up to date

## 🎯 Project Goals

Our goals for this generator:

1. **Type Safety**: 100% type coverage for generated clients
2. **Performance**: Fast generation and runtime performance
3. **Developer Experience**: Intuitive APIs and helpful error messages
4. **Compliance**: Full OpenAPI 3.x support
5. **Innovation**: Explore AI-assisted ReScript development

## 💬 Community

- **Issues**: Use GitHub issues for bug reports and feature requests
- **Discussions**: GitHub Discussions for questions and ideas
- **AI Contributions**: Document AI tool usage in commit messages

## 📄 License

By contributing, you agree that your contributions will be licensed under the MIT License.

---

Thank you for contributing to the future of type-safe API client generation! 🚀
